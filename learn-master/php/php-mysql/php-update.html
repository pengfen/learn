更新与删除数据

数据的更新与删除相对比较简单 只需要构建好相应的sql 语句 然后调用 mysql_query 执行氷能完成相应的更新与删除操作
$sql = "update user set name = '曹操' where id=2 limit 1";
if (mysql_query($sql)) {
	echo '更新成功';
}

同样的删除可以使用类似以下的代码
$sql = "delete from user where id=2 limit 1";
if (mysql_query($sql)) {
	echo '删除成功';
}

对于删除与更新操作 可以通过mysql_affected_rows函数来获取更新过的数据行数 如果数据没有变化 则结果为0
$sql = "update user set name = '曹操' where id=2 limit 1";
if (mysql_query($sql)) {
	echo mysql_affected_rows();
}

<?php
// 连接数据库
mysql_connect('127.0.0.1', '', '');
mysql_select_db('');
mysql_query("set names 'utf8'");
// 预设数据以便进行更新操作
mysql_query("insert into user(name, age, class) values('王二', 19, '高三五班')");
$id = mysql_insert_id();
$sql = "update user set name = '李白' where id=$id";
if (mysql_query($sql)) {
	echo '数据更新行数: '.mysql_affected_rows();
} 

mysql_query("delete from user where id=$id");